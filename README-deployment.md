# دليل النشر على Railway

## إعداد yt-dlp المحلي

هذا المشروع يستخدم ملف `yt-dlp` محلي موجود في مجلد `bin/` بدلاً من تثبيته عبر pip.

### الملفات المطلوبة:

1. **bin/yt-dlp** - الملف التنفيذي لـ yt-dlp
2. **Dockerfile** - تم تحديثه لاستخدام الملف المحلي
3. **متغير البيئة YTDLP_PATH** - يشير إلى مسار الملف المحلي

### خطوات النشر على Railway:

1. **تأكد من وجود الملفات:**
   ```
   bin/yt-dlp (الملف التنفيذي)
   Dockerfile (محدث)
   ```

2. **ربط المشروع بـ Railway:**
   - اذهب إلى [railway.app](https://railway.app)
   - اختر "Deploy from GitHub repo"
   - اختر مستودع المشروع

3. **تكوين متغيرات البيئة في Railway:**
   - في لوحة تحكم Railway، اذهب إلى Variables
   - أضف: `YTDLP_PATH=/app/bin/yt-dlp`

4. **النشر:**
   - Railway سيقوم بالبناء والنشر تلقائياً
   - سيستخدم Dockerfile المحدث

### ملاحظات مهمة:

- الملف `bin/yt-dlp` يجب أن يكون قابلاً للتنفيذ
- Dockerfile يقوم بتعيين الصلاحيات المناسبة تلقائياً
- متغير البيئة `YTDLP_PATH` محدد في Dockerfile

### استكشاف الأخطاء:

إذا واجهت مشاكل:
1. تأكد من أن ملف `bin/yt-dlp` موجود ومحدث
2. تحقق من أن Dockerfile يحتوي على `ENV YTDLP_PATH=/app/bin/yt-dlp`
3. تأكد من أن Railway يمكنه الوصول إلى مجلد `bin/`

### التحقق من التشغيل:

بعد النشر، يمكنك التحقق من عمل yt-dlp عبر endpoint:
`GET /api/check-ytdlp`
